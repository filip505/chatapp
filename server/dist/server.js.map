{"version":3,"sources":["../src/main/server.js"],"names":["port","app","disable","use","bodyParser","json","authMiddleware","routers","http","createServer","listen","server","closeAll","console","log","connection","close","socket","process","env","NODE_ENV"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;0BAEe,iBAAOA,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAEb;AAEA;AACA;AACA;AAGA;AAEIC,YAAAA,GAXS,GAWH,uBAXG;AAYbA,YAAAA,GAAG,CAACC,OAAJ,CAAY,MAAZ;AACAD,YAAAA,GAAG,CAACE,GAAJ,CAAQ,oBAAR;AACAF,YAAAA,GAAG,CAACE,GAAJ,CAAQC,oBAAWC,IAAX,EAAR;AACAJ,YAAAA,GAAG,CAACE,GAAJ,CAAQG,0BAAR;AACAL,YAAAA,GAAG,CAACE,GAAJ,CAAQI,eAAR;AACAN,YAAAA,GAAG,GAAGO,cAAKC,YAAL,CAAkBR,GAAlB,CAAN;AAjBa;AAAA,mBAmBQA,GAAG,CAACS,MAAJ,CAAWV,IAAX,CAnBR;;AAAA;AAmBPW,YAAAA,MAnBO;;AAqBbA,YAAAA,MAAM,CAACC,QAAP,GAAkB,YAAM;AACtBC,cAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAC,cAAAA,UAAU,CAACC,KAAX;AACAL,cAAAA,MAAM,CAACK,KAAP;AACAC,cAAAA,MAAM,CAACD,KAAP;AACD,aALD;;AAOAH,YAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACAD,YAAAA,OAAO,CAACC,GAAR,CAAY,2BAA2Bd,IAAvC;AACAa,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAgBI,OAAO,CAACC,GAAR,CAAYC,QAAxC;AA9Ba,6CA+BNT,MA/BM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import '@babel/polyfill'\nimport express from 'express'\nimport bodyParser from 'body-parser'\nimport http from 'http'\nimport  { getConnection } from 'typeorm'\nimport { authMiddleware, oauthMiddleware } from './middleware'\nimport routers from './routes'\nimport fixtures from './fixtures'\nimport cors from 'cors'\n\nexport default async (port) => {\n\n  //await connection.runMigrations()\n\n  // await getConnection().synchronize(true);\n  // fixtures.init()\n  // if (process.env.NODE_ENV === 'test') {\n\n\n  // }\n  \n  let app = express()\n  app.disable('etag');\n  app.use(cors())\n  app.use(bodyParser.json())\n  app.use(authMiddleware)\n  app.use(routers)\n  app = http.createServer(app)\n\n  const server = await app.listen(port)\n\n  server.closeAll = () => {\n    console.log('close all')\n    connection.close()\n    server.close()\n    socket.close()\n  }\n\n  console.log('___________________________')\n  console.log('server started at port' + port)\n  console.log('server env ' + process.env.NODE_ENV)\n  return server\n}"],"file":"server.js"}